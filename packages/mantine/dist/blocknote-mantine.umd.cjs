(function(b,o){typeof exports=="object"&&typeof module<"u"?o(exports,require("react/jsx-runtime"),require("@blocknote/core"),require("@blocknote/react"),require("@mantine/core"),require("react"),require("@mantine/hooks")):typeof define=="function"&&define.amd?define(["exports","react/jsx-runtime","@blocknote/core","@blocknote/react","@mantine/core","react","@mantine/hooks"],o):(b=typeof globalThis<"u"?globalThis:b||self,o(b["blocknote-mantine"]={},b.jsxRuntime,b.core,b.react,b.core$1,b.React,b.hooks))})(this,function(b,o,m,w,l,c,S){"use strict";const y=(e=>e&&typeof e=="object"&&"default"in e?e:{default:e})(c),M=(e,r,t=!1)=>{const n=[];function s(a,d="--bn"){for(const i in a){const u=i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),f=`${d}-${u}`;typeof a[i]!="object"?(typeof a[i]=="number"&&(a[i]=`${a[i]}px`),t?r.style.removeProperty(f):r.style.setProperty(f,a[i].toString())):s(a[i],f)}}return s(e),n},T=(e,r)=>M(e,r),L={colors:{editor:{text:void 0,background:void 0},menu:{text:void 0,background:void 0},tooltip:{text:void 0,background:void 0},hovered:{text:void 0,background:void 0},selected:{text:void 0,background:void 0},disabled:{text:void 0,background:void 0},shadow:void 0,border:void 0,sideMenu:void 0,highlights:{gray:{text:void 0,background:void 0},brown:{text:void 0,background:void 0},red:{text:void 0,background:void 0},orange:{text:void 0,background:void 0},yellow:{text:void 0,background:void 0},green:{text:void 0,background:void 0},blue:{text:void 0,background:void 0},purple:{text:void 0,background:void 0},pink:{text:void 0,background:void 0}}},borderRadius:void 0,fontFamily:void 0},E=e=>M(L,e,!0),B=c.forwardRef((e,r)=>{const{className:t,name:n,label:s,variant:a,icon:d,value:i,autoFocus:u,placeholder:f,disabled:g,onKeyDown:v,onChange:h,onSubmit:Ee,autoComplete:Ne,...Pe}=e;return m.assertEmpty(Pe),o.jsx(l.TextInput,{size:"xs",className:m.mergeCSSClasses(t||"",a==="large"?"bn-mt-input-large":""),ref:r,name:n,label:s,leftSection:d,value:i,autoFocus:u,"data-autofocus":u?"true":void 0,placeholder:f,disabled:g,onKeyDown:v,onChange:h,onSubmit:Ee,autoComplete:Ne})});var N={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},P=y.default.createContext&&y.default.createContext(N),z=["attr","size","title"];function G(e,r){if(e==null)return{};var t=_(e,r),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)n=a[s],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}function _(e,r){if(e==null)return{};var t={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(r.indexOf(n)>=0)continue;t[n]=e[n]}return t}function C(){return C=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},C.apply(this,arguments)}function F(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),t.push.apply(t,n)}return t}function k(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?F(Object(t),!0).forEach(function(n){V(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):F(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function V(e,r,t){return r=A(r),r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function A(e){var r=q(e,"string");return typeof r=="symbol"?r:r+""}function q(e,r){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,r||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function O(e){return e&&e.map((r,t)=>y.default.createElement(r.tag,k({key:t},r.attr),O(r.child)))}function D(e){return r=>y.default.createElement(H,C({attr:k({},e.attr)},r),O(e.child))}function H(e){var r=t=>{var{attr:n,size:s,title:a}=e,d=G(e,z),i=s||t.size||"1em",u;return t.className&&(u=t.className),e.className&&(u=(u?u+" ":"")+e.className),y.default.createElement("svg",C({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,d,{className:u,style:k(k({color:e.color||t.color},t.style),e.style),height:i,width:i,xmlns:"http://www.w3.org/2000/svg"}),a&&y.default.createElement("title",null,a),e.children)};return P!==void 0?y.default.createElement(P.Consumer,null,t=>r(t)):r(N)}function K(e){return D({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function U(e){return D({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"},child:[]}]})(e)}const I=c.createContext(void 0),W=c.forwardRef((e,r)=>{const{children:t,onOpenChange:n,position:s,sub:a,...d}=e;m.assertEmpty(d);const[i,u]=c.useState(!1),f=c.useRef(null),g=c.useRef(),v=c.useCallback(()=>{g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{u(!1)},250)},[]),h=c.useCallback(()=>{g.current&&clearTimeout(g.current),u(!0)},[]);return o.jsx(I.Provider,{value:{onMenuMouseOver:h,onMenuMouseLeave:v},children:o.jsx(l.Menu.Item,{className:"bn-menu-item bn-mt-sub-menu-item",ref:S.mergeRefs(r,f),onMouseOver:h,onMouseLeave:v,children:o.jsx(l.Menu,{portalProps:{target:f.current?f.current.parentElement:void 0},middlewares:{flip:!0,shift:!0,inline:!1,size:!0},trigger:"hover",opened:i,onClose:()=>n==null?void 0:n(!1),onOpen:()=>n==null?void 0:n(!0),position:s,children:t})})})}),Z=e=>{const{children:r,onOpenChange:t,position:n,sub:s,...a}=e;return m.assertEmpty(a),s?o.jsx(W,{...e}):o.jsx(l.Menu,{withinPortal:!1,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},onClose:()=>t==null?void 0:t(!1),onOpen:()=>t==null?void 0:t(!0),position:n,children:r})},J=c.forwardRef((e,r)=>{const{className:t,children:n,icon:s,checked:a,subTrigger:d,onClick:i,...u}=e;return m.assertEmpty(u,!1),d?o.jsxs("div",{onClick:f=>{f.preventDefault(),f.stopPropagation()},ref:r,...u,children:[n,o.jsx(U,{size:15})]}):o.jsx(l.Menu.Item,{className:t,ref:r,leftSection:s,rightSection:a?o.jsx(l.CheckIcon,{size:10}):a===!1?o.jsx("div",{className:"bn-tick-space"}):null,onClick:i,...u,children:n})}),Q=e=>{const{children:r,sub:t,...n}=e;return m.assertEmpty(n),o.jsx(l.Menu.Target,{children:r})},X=c.forwardRef((e,r)=>{const{className:t,children:n,sub:s,...a}=e;m.assertEmpty(a);const d=c.useContext(I);return o.jsx(l.Menu.Dropdown,{className:t,ref:r,onMouseOver:d==null?void 0:d.onMenuMouseOver,onMouseLeave:d==null?void 0:d.onMenuMouseLeave,children:n})}),Y=c.forwardRef((e,r)=>{const{className:t,...n}=e;return m.assertEmpty(n),o.jsx(l.Menu.Divider,{className:t,ref:r})}),R=c.forwardRef((e,r)=>{const{className:t,children:n,...s}=e;return m.assertEmpty(s),o.jsx(l.Menu.Label,{className:t,ref:r,children:n})}),$=c.forwardRef((e,r)=>{const{className:t,tabs:n,defaultOpenTab:s,openTab:a,setOpenTab:d,loading:i,...u}=e;return m.assertEmpty(u),o.jsx(l.Group,{className:t,ref:r,children:o.jsxs(l.Tabs,{value:a,defaultValue:s,onChange:d,children:[i&&o.jsx(l.LoadingOverlay,{visible:i}),o.jsx(l.Tabs.List,{children:n.map(f=>o.jsx(l.Tabs.Tab,{"data-test":`${f.name.toLowerCase()}-tab`,value:f.name,children:f.name},f.name))}),n.map(f=>o.jsx(l.Tabs.Panel,{value:f.name,children:f.tabPanel},f.name))]})})}),ee=c.forwardRef((e,r)=>{const{className:t,children:n,onClick:s,label:a,...d}=e;return m.assertEmpty(d),o.jsx(l.Button,{size:"xs","aria-label":a,className:t,ref:r,onClick:s,...d,children:n})}),te=c.forwardRef((e,r)=>{const{className:t,accept:n,value:s,placeholder:a,onChange:d,...i}=e;return m.assertEmpty(i),o.jsx(l.FileInput,{size:"xs",className:t,ref:r,accept:n,value:s,placeholder:a,onChange:d,...i})}),re=c.forwardRef((e,r)=>{const{className:t,children:n,...s}=e;return m.assertEmpty(s),o.jsx("div",{className:t,ref:r,children:n})}),ne=c.forwardRef((e,r)=>{const{className:t,value:n,placeholder:s,onKeyDown:a,onChange:d,...i}=e;return m.assertEmpty(i),o.jsx(l.TextInput,{size:"xs","data-test":"embed-input",className:t,ref:r,value:n,placeholder:s,onKeyDown:a,onChange:d})}),se=e=>{const{children:r,opened:t,position:n,...s}=e;return m.assertEmpty(s),o.jsx(l.Popover,{withinPortal:!1,opened:t,position:n,children:r})},oe=e=>{const{children:r,...t}=e;return m.assertEmpty(t),o.jsx(l.PopoverTarget,{children:r})},ae=c.forwardRef((e,r)=>{const{className:t,children:n,variant:s,...a}=e;return m.assertEmpty(a),o.jsx(l.PopoverDropdown,{className:t,ref:r,children:n})}),le=c.forwardRef((e,r)=>{const{className:t,children:n,...s}=e;return m.assertEmpty(s,!1),o.jsx(l.Group,{align:"center",gap:0,className:t,ref:r,...s,children:n})}),ie=c.forwardRef((e,r)=>{const{className:t,children:n,icon:s,onClick:a,onDragEnd:d,onDragStart:i,draggable:u,label:f,...g}=e;return m.assertEmpty(g,!1),s?o.jsx(l.ActionIcon,{size:24,className:t,ref:r,onClick:a,onDragEnd:d,onDragStart:i,draggable:u,"aria-label":f,...g,children:s}):o.jsx(l.Button,{className:t,ref:r,onClick:a,onDragEnd:d,onDragStart:i,draggable:u,"aria-label":f,...g,children:n})}),de=c.forwardRef((e,r)=>{const{className:t,children:n,id:s,columns:a,...d}=e;return m.assertEmpty(d),o.jsx("div",{className:t,style:{gridTemplateColumns:`repeat(${a}, 1fr)`},ref:r,id:s,role:"grid",children:n})}),ue=c.forwardRef((e,r)=>{const{className:t,children:n,columns:s,...a}=e;return m.assertEmpty(a),o.jsx(l.Group,{className:t,style:{gridColumn:`1 / ${s+1}`},ref:r,children:o.jsx(l.Group,{className:"bn-mt-suggestion-menu-item-title",children:n})})}),ce=c.forwardRef((e,r)=>{const{className:t,isSelected:n,onClick:s,item:a,id:d,...i}=e;m.assertEmpty(i);const u=c.useRef(null);return c.useEffect(()=>{if(!u.current||!n)return;const f=w.elementOverflow(u.current,document.querySelector(".bn-grid-suggestion-menu"));f==="top"?u.current.scrollIntoView(!0):f==="bottom"&&u.current.scrollIntoView(!1)},[n]),o.jsx("div",{className:t,ref:S.mergeRefs(r,u),id:d,role:"option",onClick:s,"aria-selected":n||void 0,children:a.icon})}),fe=c.forwardRef((e,r)=>{const{className:t,children:n,columns:s,...a}=e;return m.assertEmpty(a),o.jsx(l.Loader,{className:t,style:{gridColumn:`1 / ${s+1}`},type:"dots",ref:r})}),me=c.forwardRef((e,r)=>{const{className:t,children:n,id:s,...a}=e;return m.assertEmpty(a),o.jsx(l.Stack,{gap:0,className:t,ref:r,id:s,role:"listbox",children:n})}),pe=c.forwardRef((e,r)=>{const{className:t,children:n,...s}=e;return m.assertEmpty(s),o.jsx(l.Group,{className:t,ref:r,children:o.jsx(l.Group,{className:"bn-mt-suggestion-menu-item-title",children:n})})}),be=c.forwardRef((e,r)=>{const{className:t,isSelected:n,onClick:s,item:a,id:d,...i}=e;m.assertEmpty(i);const u=c.useRef(null);return c.useEffect(()=>{if(!u.current||!n)return;const f=w.elementOverflow(u.current,document.querySelector(".bn-suggestion-menu, #ai-suggestion-menu"));f==="top"?u.current.scrollIntoView(!0):f==="bottom"&&u.current.scrollIntoView(!1)},[n]),o.jsxs(l.Group,{gap:0,className:t,ref:S.mergeRefs(r,u),id:d,role:"option",onMouseDown:f=>f.preventDefault(),onClick:s,"aria-selected":n||void 0,children:[a.icon&&o.jsx(l.Group,{className:"bn-mt-suggestion-menu-item-section","data-position":"left",children:a.icon}),o.jsxs(l.Stack,{gap:0,className:"bn-mt-suggestion-menu-item-body",children:[o.jsx(l.Text,{className:"bn-mt-suggestion-menu-item-title",children:a.title}),o.jsx(l.Text,{className:"bn-mt-suggestion-menu-item-subtitle",children:a.subtext})]}),a.badge&&o.jsx(l.Group,{"data-position":"right",className:"bn-mt-suggestion-menu-item-section",children:o.jsx(l.Badge,{size:"xs",children:a.badge})})]})}),ge=c.forwardRef((e,r)=>{const{className:t,children:n,...s}=e;return m.assertEmpty(s),o.jsx(l.Group,{className:t,ref:r,children:n})}),ve=c.forwardRef((e,r)=>{const{className:t,children:n,...s}=e;return m.assertEmpty(s),o.jsx(l.Loader,{className:t,type:"dots",ref:r})}),he=c.forwardRef((e,r)=>{const{children:t,className:n,onMouseDown:s,onClick:a,...d}=e;return m.assertEmpty(d,!1),o.jsx(l.Button,{className:n,ref:r,onMouseDown:s,onClick:a,...d,children:t})}),ye=c.forwardRef((e,r)=>{const{className:t,children:n,draggable:s,onDragStart:a,onDragEnd:d,style:i,label:u,...f}=e;return m.assertEmpty(f,!1),o.jsx(l.Button,{className:t,ref:r,"aria-label":u,draggable:s,onDragStart:a,onDragEnd:d,style:i,...f,children:n})}),we=c.forwardRef((e,r)=>{const{className:t,children:n,onMouseEnter:s,onMouseLeave:a,...d}=e;m.assertEmpty(d);const{ref:i,focused:u}=S.useFocusWithin(),f=S.useFocusTrap(u),g=S.mergeRefs(r,i,f);return o.jsx(l.Group,{className:t,ref:g,role:"toolbar",onMouseEnter:s,onMouseLeave:a,children:n})}),Se=e=>o.jsxs(l.Stack,{gap:0,className:"bn-tooltip",children:[o.jsx(l.Text,{size:"sm",children:e.mainTooltip}),e.secondaryTooltip&&o.jsx(l.Text,{size:"xs",children:e.secondaryTooltip})]}),Ce=c.forwardRef((e,r)=>{const{className:t,children:n,mainTooltip:s,secondaryTooltip:a,icon:d,isSelected:i,isDisabled:u,onClick:f,label:g,...v}=e;return m.assertEmpty(v,!1),o.jsx(l.Tooltip,{withinPortal:!1,label:s&&o.jsx(Se,{mainTooltip:s,secondaryTooltip:a}),children:n?o.jsx(l.Button,{"aria-label":g,className:t,onMouseDown:h=>{m.isSafari()&&h.currentTarget.focus()},onClick:f,leftSection:d,"aria-pressed":i,"data-selected":i||void 0,"data-test":s&&s.slice(0,1).toLowerCase()+s.replace(/\s+/g,"").slice(1),size:"xs",disabled:u||!1,ref:r,...v,children:n}):o.jsx(l.ActionIcon,{className:t,"aria-label":g,onMouseDown:h=>{m.isSafari()&&h.currentTarget.focus()},onClick:f,"aria-pressed":i,"data-selected":i||void 0,"data-test":s&&s.slice(0,1).toLowerCase()+s.replace(/\s+/g,"").slice(1),size:30,disabled:u||!1,ref:r,...v,children:d})})}),ke=c.forwardRef((e,r)=>{const{className:t,items:n,isDisabled:s,...a}=e;m.assertEmpty(a);const d=n.filter(i=>i.isSelected)[0];return d?o.jsxs(l.Menu,{withinPortal:!1,transitionProps:{exitDuration:0},disabled:s,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},children:[o.jsx(l.Menu.Target,{children:o.jsx(l.Button,{onMouseDown:i=>{m.isSafari()&&i.currentTarget.focus()},leftSection:d.icon,rightSection:o.jsx(K,{}),size:"xs",variant:"subtle",disabled:s,children:d.text})}),o.jsx(l.Menu.Dropdown,{className:t,ref:r,children:n.map(i=>o.jsx(l.Menu.Item,{onClick:i.onClick,leftSection:i.icon,rightSection:i.isSelected?o.jsx(l.CheckIcon,{size:10,className:"bn-tick-icon"}):o.jsx("div",{className:"bn-tick-space"}),disabled:i.isDisabled,children:i.text},i.text))})]}):null}),p=["#FFFFFF","#EFEFEF","#CFCFCF","#AFAFAF","#7F7F7F","#3F3F3F","#1F1F1F","#161616","#0F0F0F","#000000"],x={colors:{editor:{text:p[5],background:p[0]},menu:{text:p[5],background:p[0]},tooltip:{text:p[5],background:p[1]},hovered:{text:p[5],background:p[1]},selected:{text:p[0],background:p[5]},disabled:{text:p[3],background:p[1]},shadow:p[2],border:p[1],sideMenu:p[2],highlights:m.COLORS_DEFAULT},borderRadius:6,fontFamily:'"Inter", "SF Pro Display", -apple-system, BlinkMacSystemFont, "Open Sans", "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif'},Te={colors:{editor:{text:p[2],background:p[6]},menu:{text:p[2],background:p[6]},tooltip:{text:p[2],background:p[7]},hovered:{text:p[2],background:p[7]},selected:{text:p[2],background:p[8]},disabled:{text:p[5],background:p[7]},shadow:p[8],border:p[7],sideMenu:p[4],highlights:m.COLORS_DARK_MODE_DEFAULT},borderRadius:x.borderRadius,fontFamily:x.fontFamily},j={Toolbar:{Root:we,Button:Ce,Select:ke},FilePanel:{Root:$,Button:ee,FileInput:te,TabPanel:re,TextInput:ne},GridSuggestionMenu:{Root:de,Item:ce,EmptyItem:ue,Loader:fe},SideMenu:{Root:le,Button:ie},SuggestionMenu:{Root:me,Item:be,EmptyItem:pe,Label:ge,Loader:ve},TableHandle:{Root:ye,ExtendButton:he},Generic:{Form:{Root:e=>o.jsx("div",{children:e.children}),TextInput:B},Menu:{Root:Z,Trigger:Q,Dropdown:X,Divider:Y,Label:R,Item:J},Popover:{Root:se,Trigger:oe,Content:ae}}},xe={activeClassName:""},Me=e=>{const{className:r,theme:t,...n}=e,s=w.useBlockNoteContext(),a=w.usePrefersColorScheme(),d=(s==null?void 0:s.colorSchemePreference)||a,i=c.useCallback(u=>{if(u&&(E(u),typeof t=="object")){if("light"in t&&"dark"in t){T(t[d==="dark"?"dark":"light"],u);return}T(t,u);return}},[d,t]);return o.jsx(w.ComponentsContext.Provider,{value:j,children:o.jsx(l.MantineProvider,{theme:xe,cssVariablesSelector:".bn-mantine",getRootElement:()=>{},children:o.jsx(w.BlockNoteViewRaw,{className:m.mergeCSSClasses("bn-mantine",r||""),theme:typeof t=="object"?void 0:t,...n,ref:i})})})};b.BlockNoteView=Me,b.applyBlockNoteCSSVariablesFromTheme=T,b.components=j,b.darkDefaultTheme=Te,b.defaultColorScheme=p,b.lightDefaultTheme=x,b.removeBlockNoteCSSVariables=E,Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=blocknote-mantine.umd.cjs.map
